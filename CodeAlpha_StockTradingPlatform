import java.util.*;

// Stock class
class Stock {
    String symbol;
    String companyName;
    int price;

    Stock(String symbol, String companyName, int price) {
        this.symbol = symbol;
        this.companyName = companyName;
        this.price = price;
    }
}

// Main platform class
public class CodeAlphaStockTradingPlatform {

    private final Map<String, Stock> market = new HashMap<>();
    private final Map<String, Integer> portfolio = new HashMap<>();
    private final List<String> transactionLog = new ArrayList<>();
    private final Scanner scanner = new Scanner(System.in);

    public CodeAlphaStockTradingPlatform() {
        loadMarket();
    }

    // Load market data
    private void loadMarket() {
        market.put("STK1", new Stock("STK1", "Alpha Industries", 30000));
        market.put("STK2", new Stock("STK2", "Beta Motors", 50000));
        market.put("STK3", new Stock("STK3", "Gamma Enterprises", 80000));
    }

    // Display menu
    private void showMenu() {
        System.out.println("\n==== STOCK TRADING PLATFORM ====");
        System.out.println("1. View Market Stocks");
        System.out.println("2. Buy Stock");
        System.out.println("3. Sell Stock");
        System.out.println("4. View Portfolio");
        System.out.println("5. Transaction History");
        System.out.println("6. Exit");
        System.out.print("Choose an option: ");
    }

    // Display market
    private void displayMarket() {
        System.out.println("\nMarket Data:");
        for (Stock stock : market.values()) {
            System.out.println(stock.symbol + " | " + stock.companyName +
                    " | Price: ₹" + stock.price);
        }
    }

    // Buy stock
    private void buyStock() {
        displayMarket();
        System.out.print("Enter stock symbol: ");
        String symbol = scanner.nextLine().toUpperCase();

        if (!market.containsKey(symbol)) {
            System.out.println("Invalid stock symbol.");
            return;
        }

        System.out.print("Enter quantity: ");
        int qty = scanner.nextInt();
        scanner.nextLine();

        portfolio.put(symbol, portfolio.getOrDefault(symbol, 0) + qty);

        Stock stock = market.get(symbol);
        transactionLog.add("BOUGHT " + qty + " shares of " +
                stock.companyName + " (₹" + (qty * stock.price) + ")");

        System.out.println("Stock purchased successfully.");
    }

    // Sell stock
    private void sellStock() {
        if (portfolio.isEmpty()) {
            System.out.println("Portfolio is empty.");
            return;
        }

        displayPortfolio();
        System.out.print("Enter stock symbol to sell: ");
        String symbol = scanner.nextLine().toUpperCase();

        if (!portfolio.containsKey(symbol)) {
            System.out.println("Stock not available in portfolio.");
            return;
        }

        System.out.print("Enter quantity: ");
        int qty = scanner.nextInt();
        scanner.nextLine();

        int owned = portfolio.get(symbol);
        if (qty > owned) {
            System.out.println("Not enough shares.");
            return;
        }

        portfolio.put(symbol, owned - qty);
        if (portfolio.get(symbol) == 0)
            portfolio.remove(symbol);

        Stock stock = market.get(symbol);
        transactionLog.add("SOLD " + qty + " shares of " +
                stock.companyName + " (₹" + (qty * stock.price) + ")");

        System.out.println("Stock sold successfully.");
    }

    // Display portfolio with total value
    private void displayPortfolio() {
        if (portfolio.isEmpty()) {
            System.out.println("Portfolio is empty.");
            return;
        }

        int totalValue = 0;
        System.out.println("\nYour Portfolio:");
        for (String symbol : portfolio.keySet()) {
            Stock stock = market.get(symbol);
            int qty = portfolio.get(symbol);
            int value = qty * stock.price;
            totalValue += value;

            System.out.println(symbol + " | " + stock.companyName +
                    " | Qty: " + qty + " | Value: ₹" + value);
        }

        System.out.println("Total Portfolio Value: ₹" + totalValue);
    }

    // Transaction history
    private void showTransactions() {
        if (transactionLog.isEmpty()) {
            System.out.println("No transactions performed yet.");
            return;
        }

        System.out.println("\nTransaction History:");
        for (String record : transactionLog) {
            System.out.println(record);
        }
    }

    // Start application
    public void start() {
        while (true) {
            showMenu();
            int choice = scanner.nextInt();
            scanner.nextLine();

            switch (choice) {
                case 1 -> displayMarket();
                case 2 -> buyStock();
                case 3 -> sellStock();
                case 4 -> displayPortfolio();
                case 5 -> showTransactions();
                case 6 -> {
                    System.out.println("Thank you for using the platform.");
                    return;
                }
                default -> System.out.println("Invalid choice.");
            }
        }
    }

    public static void main(String[] args) {
        new CodeAlphaStockTradingPlatform().start();
    }
}            int qty = sc.nextInt();
            sc.nextLine(); // consume newline

            portfolio.put(symbol, portfolio.getOrDefault(symbol, 0) + qty);
            int totalCost = qty * marketPrices.get(symbol);
            transactions.add("Bought " + qty + " of " + market.get(symbol) + " for ₹" + totalCost);

            System.out.println("Successfully bought " + qty + " shares of " + market.get(symbol));
        } else {
            System.out.println("Invalid stock symbol!");
        }
    }

    // Sell stocks
    void sellStock() {
        if (portfolio.isEmpty()) {
            System.out.println("Portfolio is empty. No stocks to sell.");
            return;
        }

        displayPortfolio();
        System.out.print("Enter Stock Symbol to Sell: ");
        String symbol = sc.nextLine().toUpperCase();

        if (portfolio.containsKey(symbol)) {
            System.out.print("Enter quantity to sell: ");
            int qty = sc.nextInt();
            sc.nextLine(); // consume newline

            int ownedQty = portfolio.get(symbol);
            if (qty <= ownedQty) {
                portfolio.put(symbol, ownedQty - qty);
                if (portfolio.get(symbol) == 0) {
                    portfolio.remove(symbol);
                }

                int totalRevenue = qty * marketPrices.get(symbol);
                transactions.add("Sold " + qty + " of " + market.get(symbol) + " for ₹" + totalRevenue);
                System.out.println("Successfully sold " + qty + " shares of " + market.get(symbol));
            } else {
                System.out.println("Not enough shares to sell. You own only " + ownedQty);
            }
        } else {
            System.out.println("You don't own this stock.");
        }
    }

    // Display portfolio
    void displayPortfolio() {
        if (portfolio.isEmpty()) {
            System.out.println("Your portfolio is empty.");
        } else {
            System.out.println("Your Portfolio:");
            for (String symbol : portfolio.keySet()) {
                System.out.println(symbol + " - " + market.get(symbol) + " | Quantity: " + portfolio.get(symbol));
            }
        }
    }

    // Display transaction history
    void viewTransactions() {
        if (transactions.isEmpty()) {
            System.out.println("No transactions yet.");
        } else {
            System.out.println("Transaction History:");
            for (String tx : transactions) {
                System.out.println(tx);
            }
        }
    }

    // Main menu
    public static void main(String[] args) {
        CodeAlphaStockTradingPlatform platform = new CodeAlphaStockTradingPlatform();
        Scanner scanner = new Scanner(System.in);

        while (true) {
            System.out.println("\n==== Stock Trading Platform ====");
            System.out.println("1. Display Market Data");
            System.out.println("2. Buy Stock");
            System.out.println("3. Sell Stock");
            System.out.println("4. View Portfolio");
            System.out.println("5. View Transactions");
            System.out.println("6. Exit");
            System.out.print("Enter your choice: ");

            int choice = scanner.nextInt();
            scanner.nextLine(); // consume newline

            switch (choice) {
                case 1 -> platform.displayMarketData();
                case 2 -> platform.buyStock();
                case 3 -> platform.sellStock();
                case 4 -> platform.displayPortfolio();
                case 5 -> platform.viewTransactions();
                case 6 -> {
                    System.out.println("Exiting... Thank you!");
                    return;
                }
                default -> System.out.println("Invalid choice. Try again.");
            }
        }
    }
}
