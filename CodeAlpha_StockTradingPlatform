import java.util.*;

class Stock { String symbol,name; int price; Stock(String s,String n,int p){ symbol=s; name=n; price=p; } }

public class StockTradingPlatform {

    private Map<String,Stock> market=new HashMap<>();
    private Map<String,Integer> portfolio=new HashMap<>();
    private List<String> transactions=new ArrayList<>();
    private Scanner sc=new Scanner(System.in);

    public StockTradingPlatform(){
        market.put("STK1",new Stock("STK1","Alpha Industries",30000));
        market.put("STK2",new Stock("STK2","Beta Motors",50000));
        market.put("STK3",new Stock("STK3","Gamma Enterprises",80000));
    }

    void showMarket(){ System.out.println("Market Data:"); for(Stock s:market.values()) System.out.println(s.symbol+" - "+s.name+" -> ₹"+s.price); }

    void buy(){
        showMarket(); System.out.print("Enter Symbol: "); String sym=sc.nextLine().toUpperCase();
        if(!market.containsKey(sym)){ System.out.println("Invalid Symbol"); return; }
        System.out.print("Quantity: "); int q=sc.nextInt(); sc.nextLine();
        portfolio.put(sym,portfolio.getOrDefault(sym,0)+q);
        transactions.add("BUY "+q+" of "+market.get(sym).name+" for ₹"+(q*market.get(sym).price));
        System.out.println("Stock Bought");
    }

    void sell(){
        if(portfolio.isEmpty()){ System.out.println("Portfolio Empty"); return; }
        viewPortfolio(); System.out.print("Enter Symbol: "); String sym=sc.nextLine().toUpperCase();
        if(!portfolio.containsKey(sym)){ System.out.println("Not Owned"); return; }
        System.out.print("Quantity: "); int q=sc.nextInt(); sc.nextLine();
        int owned=portfolio.get(sym);
        if(q>owned){ System.out.println("Insufficient Quantity"); return; }
        portfolio.put(sym,owned-q); if(portfolio.get(sym)==0) portfolio.remove(sym);
        transactions.add("SELL "+q+" of "+market.get(sym).name+" for ₹"+(q*market.get(sym).price));
        System.out.println("Stock Sold");
    }

    void viewPortfolio(){
        if(portfolio.isEmpty()){ System.out.println("Portfolio Empty"); return; }
        int total=0; System.out.println("Your Portfolio:");
        for(String s:portfolio.keySet()){ int v=portfolio.get(s)*market.get(s).price; total+=v; System.out.println(s+" | "+market.get(s).name+" | Qty:"+portfolio.get(s)+" | Value:₹"+v); }
        System.out.println("Total Portfolio Value: ₹"+total);
    }

    void viewTransactions(){ if(transactions.isEmpty()) System.out.println("No Transactions"); else for(String t:transactions) System.out.println(t); }

    public void start(){
        while(true){
            System.out.println("\n1.Market 2.Buy 3.Sell 4.Portfolio 5.Transactions 6.Exit"); System.out.print("Choice: ");
            int c=sc.nextInt(); sc.nextLine();
            if(c==1) showMarket(); else if(c==2) buy(); else if(c==3) sell(); else if(c==4) viewPortfolio(); else if(c==5) viewTransactions(); else if(c==6){ System.out.println("Thank You"); break; } else System.out.println("Invalid Choice");
        }
    }

    public static void main(String[] args){ new StockTradingPlatform().start(); }
}
